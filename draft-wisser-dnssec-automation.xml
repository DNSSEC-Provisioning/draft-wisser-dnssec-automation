<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE rfc SYSTEM "rfc2629-xhtml.ent" [
	<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
 	<!ENTITY RFC8901 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.8901.xml">
	<!ENTITY RFC8078 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.8078.xml">
	<!ENTITY RFC7477 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7477.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs),
    please see http://xml.resource.org/authoring/README.html. -->
<rfc
      category="std"
      docName="draft-wisser-dnssec-automation-00"
      ipr="trust200902"
      submissionType="IETF"
      xml:lang="en"
      tocInclude="true"
      tocDepth="4"
      symRefs="true"
      sortRefs="true"
      consensus="true"
      version="3">

 <!-- ***** FRONT MATTER ***** -->

<front>
    <title abbrev="DNSSEC automation">DNSSEC automation</title>

	<author fullname="Ulrich Wisser" initials="U" surname="Wisser">
		<organization>The Swedish Internet Foundation</organization>
		<address>
			<postal>
				<street>Box 92073</street>
				<city>Stockholm</city>
				<code>12007</code>
				<country>SE</country>
			</postal>
			<email>ulrich@wisser.se</email>
			<uri>https://www.internetstiftelsen.se</uri>
		</address>
	</author>

    <date day="1" month="12" year="2020"/>

    <area>Operations and Management Area</area>
    <workgroup>Domain Name System Operations (dnsop)</workgroup>

    <keyword>DNSSEC</keyword>
    <keyword>multi-signer</keyword>

    <abstract>
        <t>
            This document describes an algorithm and a protocol to
            automate DNSSEC multi-signer <xref target="RFC8901" /> setup, operations and decomissioning.
            it makes use of <xref target="RFC8078" /> and <xref target="RFC7477" /> to accomplish this.
        </t>
    </abstract>
</front>
<middle>
    <section numbered="true" toc="default">
        <name>Introduction</name>
        <section numbered="true" toc="default">
            <name>What this document doesn't describe</name>
            <t>
                In order for any multi-signer group to give consitent answers over all instances
                the contents of the zone have to be synchronized. The content synchronization is
                out-of-scope for this document.
            </t>
        </section>
        <section numbered="true" toc="default">
            <name>Requirements Language</name>
            <t>
                The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
                "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
                document are to be interpreted as described in <xref target="RFC2119" format="default">RFC 2119</xref>.</t>
            </section>
        </section>
    <section anchor="algo" numbered="true" toc="default">
        <name>Algorithm</name>
        <section numbered="true" toc="default">
            <name>Prerequisites</name>
            <ol>
                <li>All future members of the multi-signer group need to have a working setup of the zone, including DNSSEC signing.</li>
                <li>All future members of the multi-signer group use the same algorithm for DNSSEC signing.</li>
                <li>One future member of the multi-signer group is currently authoritative answering for the zone.</li>
            </ol>
        </section>
        <section numbered="true" toc="default">
            <name>A new member joins the multi-signer group</name>
            <ol spacing="normal">
                <li>a new member joins the group</li>
                <li>Exchange of keys, after this step all members must have the dnskey set of all other members of the group</li>
                <li>Calculate CDS/CDNSKEY set</li>
                <li>All members put the ZSK of all other members in their DNSKEY set.</li>
                <li>All members publish their CDS/CDNSKEY set</li>
                <li>Wait for parent to pick up DS updates</li>
                <li>Remove CDS/CDNSKEY set from all members</li>
                <li>Wait 2 time maximum TTL of DS at parent and DNSKEY att all children</li>
                <li>Exchange of NS set, after this step all members must have the ns set of all other members</li>
                <li>Compile new complete NS set with NS records from all members</li>
                <li>Compare to NS set at parent</li>
                <li>If parent if different, publish CSYNC record with NS and A and AAAA bit set.</li>
                <li>Wait for parent to pick up changes</li>
                <li>Remove CSYNC record from all members</li>
            </ol>
        </section>
        <section numbered="true" toc="default">
            <name>A member leaves the multi-signer group</name>
            <ol spacing="normal">
                <li>Signal to all other members an empty NS set</li>
                <li>Compile new complete NS set with NS records from all members</li>
                <li>Compare to NS set at parent</li>
                <li>If parent if different, publish CSYNC record with NS and A and AAAA bit set.</li>
                <li>Wait for parent to pick up changes</li>
                <li>Remove CSYNC record from all members</li>
                <li>Wait 2 times TTL of maximum NS TTL from parent and all members</li>
                <li>Signal all other members leaving of multi-signer group</li>
                <li>Stop answering queries</li>
                <li>Remaining members remove ZSK of leaving member from their DNSKEY set</li>
                <li>Remaining members recalculat DNSKEY set</li>
                <li>Calculate CDS/CDNSKEY set</li>
                <li>All members put the ZSK of all other members in their DNSKEY set.</li>
                <li>All members publish their CDS/CDNSKEY set</li>
                <li>Wait for parent to pick up DS updates</li>
                <li>Remove CDS/CDNSKEY set from all members</li>
            </ol>
        </section>
    </section>
    <section anchor="Acknowledgements" numbered="true" toc="default">
        <name>Acknowledgements</name>
    </section>
    <section anchor="IANA" numbered="true" toc="default">
        <name>IANA Considerations</name>
    </section>
    <section anchor="Security" numbered="true" toc="default">
        <name>Security Considerations</name>
    </section>
</middle>
<back>
	<references title="Normative References">
        &RFC2119;
		&RFC8078;
		&RFC7477;
	</references>
	<references title="Informative References">
		&RFC8901;
	</references>
	<section title="Change History">
		<section title="Change from 00 to 01" anchor="change-00-to-01">
				<ol>
					<li>Corrected information for the &lt;create/&gt; command.</li>
					<li>Minor fixes in wording.</li>
					<li>Introduces resData element.</li>
				</ol>
		</section>
	</section>

</back>
</rfc>
